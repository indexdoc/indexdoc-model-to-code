<div align="center">
  <div style="font-size: 15px; line-height: 2; padding: 4px 0; letter-spacing: 0.5px;">
    <strong style="color: #24292f;">ç®€ä½“ä¸­æ–‡</strong> 
    | <a href="README_EN.md" style="color: #0969da; text-decoration: none;">English</a>
    | <a href="https://ä½ çš„Demoåœ¨çº¿åœ°å€" target="_blank" style="color: #165DFF; font-weight: 600; text-decoration: none;">âœ¨ åœ¨çº¿Demo</a>
  </div>
  <div style="font-size: 14px; color: #57606a; padding: 2px 0;">
    <span style="background: #f6f8fa; padding: 2px 8px; border-radius: 4px; font-size: 13px;">æ ¸å¿ƒä»“åº“</span>
    <a href="https://github.com/indexdoc/indexdoc-batch-generator" target="_blank" style="color: #0969da; text-decoration: none; margin: 0 6px;">indexdoc-batch-generatorï¼ˆæ‰¹é‡æ–‡æ¡£åŠ©æ‰‹ï¼‰</a>
    <a href="https://github.com/indexdoc/indexdoc-ai-offline" target="_blank" style="color: #0969da; text-decoration: none; margin: 0 6px;">indexdoc-ai-offlineï¼ˆæœ¬åœ°æ–‡æ¡£AIåŠ©æ‰‹ï¼‰</a>
    <a href="https://github.com/indexdoc/indexdoc-converter" target="_blank" style="color: #0969da; text-decoration: none; margin: 0 6px;">indexdoc-converterï¼ˆæ–‡æ¡£è½¬æ¢å™¨ï¼‰</a>
    <a href="https://github.com/indexdoc/indexdoc-editor" target="_blank" style="color: #0969da; text-decoration: none; margin: 0 6px;">indexdoc-editorï¼ˆMarkdownç¼–è¾‘å™¨ï¼‰</a>
    <a href="https://github.com/indexdoc/indexdoc-vector" target="_blank" style="color: #0969da; text-decoration: none; margin: 0 6px;">indexdoc-vectorï¼ˆå‘é‡æ•°æ®åº“ï¼‰</a>
  </div>
</div>

---
# CodeAsst ç¼–ç åŠ©ç†
ç¼–ç åŠ©ç†ï¼ˆCodeAsstï¼‰æ˜¯ä¸€æ¬¾åŠŸèƒ½å¼ºå¤§çš„ä»£ç ç”Ÿæˆå·¥å…·ï¼Œæ ¸å¿ƒåŸç†éµå¾ª **æ•°æ®æ¨¡å‹ + æ¨¡æ¿ = ä»£ç ** çš„è®¾è®¡ç†å¿µï¼ŒåŠ©åŠ›å¼€å‘å›¢é˜Ÿå’Œä¸ªäººå®ç°æ‰¹é‡ã€æ ‡å‡†åŒ–çš„ä»£ç ç”Ÿæˆï¼Œå¤§å¹…æå‡å¼€å‘æ•ˆç‡ã€‚

ç›®å‰æ”¯æŒ PowerDesigner ç”Ÿæˆçš„ PDM æ–‡ä»¶ï¼Œå¯ä» Oracleã€MySQLã€MS SQL Serverã€PostgreSQL ç­‰å¤šç§æ•°æ®åº“è·å–è¡¨æ¨¡å‹ï¼Œä¹Ÿæ”¯æŒé€šè¿‡ XML æ–‡ä»¶æ‰‹åŠ¨ç¼–è¾‘æ•°æ®æ¨¡å‹ã€‚

æ¨¡æ¿è¯­æ³•é‡‡ç”¨ç±» Velocityï¼ˆä¸ Freemarker ç±»ä¼¼ï¼‰é£æ ¼ï¼Œæ”¯æŒè‡ªå®šä¹‰**æ¨¡æ¿é›†**ã€‚ä¸€ä¸ªæ¨¡æ¿é›†å¯åŒ…å«å¤šä¸ªæ¨¡æ¿æ–‡ä»¶ï¼Œé€šè¿‡æ¨¡æ¿é›†èƒ½å¤Ÿä¸€é”®ç”Ÿæˆä¸€ä¸ªè½¯ä»¶é¡¹ç›®çš„æ‰€æœ‰ä»£ç æ–‡ä»¶ä¸é…ç½®æ–‡ä»¶ã€‚
è¿”å›markdownæ ¼å¼çš„æ–‡æœ¬ç»™æˆ‘ ä¸è¦ç›´æ¥æ¸²æŸ“

æ­¤å·¥å…·é€‚ç”¨äºå„ç±»è½¯ä»¶å…¬å¸ã€å·¥ä½œå®¤ã€å¼€å‘å›¢é˜ŸåŠä¸ªäººå¼€å‘è€…ã€‚
æ•°æ®æ¨¡å‹æ˜¯è½¯ä»¶ç³»ç»Ÿçš„åŸºç¡€ï¼Œç³»ç»Ÿçš„å¤§éƒ¨åˆ†æ“ä½œéƒ½å›´ç»•åŸºç¡€æ•°æ®çš„å¢åˆ æŸ¥æ”¹å±•å¼€ã€‚å¦‚æœä½ ä¹ æƒ¯äº**å…ˆè®¾è®¡æ•°æ®æ¨¡å‹ï¼Œå†ç¼–å†™ä»£ç **ï¼Œé‚£ä¹ˆ CodeAsst å°†ä¼šæ˜¯ä½ çš„é«˜æ•ˆå¼€å‘åŠ©æ‰‹ã€‚ç†Ÿç»ƒä½¿ç”¨åï¼Œä½ å¯ä»¥æ‰¹é‡ç”Ÿæˆä¸€ä¸ªç³»ç»Ÿçš„å‡ ä¹æ‰€æœ‰ä»£ç ï¼›æ›´å¯ä»¥åŸºäºå·²æœ‰ç³»ç»Ÿçš„ä»£ç æ¨¡æ¿ï¼Œæ‰¹é‡ç”Ÿæˆå¤šä¸ªç³»ç»Ÿçš„ Demo ç‰ˆæœ¬â€”â€”è¿™å¹¶éå¤¸å¤§ï¼Œè€Œæ˜¯ CodeAsst å·²ç»å®ç°çš„åŠŸèƒ½ã€‚

[![Python Version](https://img.shields.io/badge/python-3.10+-green.svg)](https://www.python.org/) [![GitHub Stars](https://img.shields.io/github/stars/indexdoc/indexdoc-model-to-code?style=social)](https://github.com/indexdoc/indexdoc-model-to-code) [![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)


## 1 âœ¨ ä»£ç ç”Ÿæˆæµç¨‹
![ç”Ÿæˆçš„æ–‡ä»¶ç¤ºä¾‹](https://github.com/indexdoc/indexdoc-model-to-code/raw/main/README/codeGenerationProcess.png)
- **æ•°æ®æ¨¡å‹**ï¼šç”¨æ•°æ®æ¨¡å‹å·¥å…·ç”Ÿæˆçš„æ–‡ä»¶ï¼ŒCodeAsstæ”¯æŒPowerDesignerç”Ÿæˆçš„PDMæ–‡ä»¶ï¼ˆéœ€è¦å®‰è£…PowerDesigner15.3ä»¥ä¸Šç‰ˆæœ¬ï¼‰å’ŒOracleã€MySQLã€MS SQL Serverã€PostgreSQLç­‰å››ç§æ•°æ®åº“çš„è¡¨æ¨¡å‹ã€‚
- **ä»£ç æ¨¡æ¿**ï¼šç”¨æˆ·è‡ªå®šä¹‰çš„æ¨¡æ¿æ–‡ä»¶ï¼Œä¸€èˆ¬æ˜¯æ ¹æ®å·²æœ‰ä»£ç ï¼Œå°†å…¶ä¸­éœ€è¦æ•°æ®æ¨¡å‹æ›¿æ¢çš„å†…å®¹ç”¨CodeAsstè‡ªå®šä¹‰çš„å˜é‡è¿›è¡Œæ›¿æ¢ã€‚
- **æ•°æ®ç±»å‹æ˜ å°„**ï¼šä»æ•°æ®æ¨¡å‹åˆ°ç¼–ç¨‹è¯­è¨€ä¹‹é—´çš„æ•°æ®ç±»å‹æ˜ å°„å…³ç³»ï¼Œæ¯”å¦‚Oracleçš„Varchar2å¯¹åº”Javaä¸­çš„Stringã€‚
- **ä»£ç ç”Ÿæˆ**ï¼šæ•°æ®æ¨¡å‹+ä»£ç æ¨¡æ¿ï¼Œé€šè¿‡æ•°æ®ç±»å‹æ˜ å°„å…³ç³»ç”Ÿæˆä»£ç ã€‚

## 2 ğŸš€ ä»£ç ç”Ÿæˆæ“ä½œ
### 2.1 ç³»ç»Ÿä¸»é¡µé¢
![ç”Ÿæˆçš„æ–‡ä»¶ç¤ºä¾‹](https://github.com/indexdoc/indexdoc-model-to-code/raw/main/README/mainPage.png)
### 2.2 â€œæ•°æ®ç±»å‹æ˜ å°„â€ç•Œé¢
![ç”Ÿæˆçš„æ–‡ä»¶ç¤ºä¾‹](https://github.com/indexdoc/indexdoc-model-to-code/raw/main/README/dataTypeMapping.png)

æ•°æ®ç±»å‹æ˜ å°„å…³ç³»å¯ä»¥ä¿å­˜åœ¨æ–‡ä»¶ä¸­ï¼ŒCodeAsstæœ‰ä¸€ä¸ªé»˜è®¤çš„æ•°æ®ç±»å‹æ˜ å°„æ–‡ä»¶default.typemapï¼Œç”¨æˆ·å¯ä»¥ç¼–è¾‘è‡ªå·±çš„æ•°æ®ç±»å‹æ˜ å°„æ–‡ä»¶ã€‚
### 2.3 â€œç¼–è¾‘æ¨¡æ¿â€ç•Œé¢
![ç”Ÿæˆçš„æ–‡ä»¶ç¤ºä¾‹](https://github.com/indexdoc/indexdoc-model-to-code/raw/main/README/editTemplate.png)

CodeAsstæ”¯æŒæ¨¡æ¿é›†ï¼Œä¸€ä¸ªæ¨¡æ¿é›†åŒ…æ‹¬å¤šä¸ªæ¨¡æ¿ï¼Œæ¯”å¦‚ä½ å¯ä»¥å®šä¹‰Javaç¨‹åºçš„æ¨¡æ¿é›†ï¼Œä¹Ÿå¯ä»¥å®šä¹‰ä¸€ä¸ª.NETç¨‹åºçš„æ¨¡æ¿é›†ã€‚
#### 2.3.1 æ–°å»ºæ¨¡æ¿
ç‚¹å‡»â€œæ–°å»ºæ¨¡æ¿â€æŒ‰é’®å¯ä»¥æ–°å»ºä¸€ä¸ªæ¨¡æ¿æ–‡ä»¶ï¼Œåœ¨è¿™ä¸ªç•Œé¢ä¸­å¯ä»¥å¯¼å…¥å·²æœ‰çš„æ¨¡æ¿æ–‡ä»¶çš„å†…å®¹ã€‚
æ¨¡æ¿ç±»å‹æœ‰ä¸¤ç§ï¼šé¢å‘å•ä¸ªè¡¨çš„TPL_TYPE_TABLEå’Œé¢å‘æ•´ä¸ªæ•°æ®æ¨¡å‹çš„TPL_TYPE_MODELã€‚TPL_TYPE_TABLEé€‚åˆäºå¯¹å•è¡¨çš„å¢åˆ æŸ¥æ”¹æ“ä½œçš„ä»£ç æ¨¡æ¿ï¼ŒTPL_TYPE_MODELé€‚åˆäºé¢å‘å¤šä¸ªè¡¨çš„æ“ä½œæ–‡ä»¶ã€‚

![ç”Ÿæˆçš„æ–‡ä»¶ç¤ºä¾‹](https://github.com/indexdoc/indexdoc-model-to-code/raw/main/README/newTemplate.png)
#### 2.3.2 TPL_TYPE_TALBEæ¨¡æ¿ä½¿ç”¨è¯´æ˜
æ­¤æ¨¡æ¿é€šè¿‡å†…ç½®å˜é‡tableè·å–æ•°æ®æ¨¡å‹ä¸­çš„ä¸€ä¸ªtableçš„ç›¸å…³å±æ€§ã€‚
æ¨¡æ¿çš„æ³¨é‡Šä½¿ç”¨â€œ#*â€â€œ*#â€ï¼Œæ­¤ä¸¤è€…ä¹‹é—´åŒ…æ‹¬çš„å†…å®¹çš„ç”Ÿæˆä»£ç æ—¶ä¼šç•¥æ‰ã€‚
```bush
#*æ¨¡æ¿ä½¿ç”¨æ–¹æ³•

 1ã€æ­¤æ¨¡æ¿ä½¿ç”¨Velocityè¯­æ³•ï¼›

 2ã€æ¨¡æ¿ç±»å‹ä¸ºâ€œTPL_TYPE_TABLEâ€éœ€ä½¿ç”¨tableä½œä¸ºå¼•ç”¨å¯¹è±¡ï¼Œæ¨¡æ¿ç±»å‹ä¸ºâ€œTPL_TYPE_MODELâ€çš„éœ€ä½¿ç”¨modelä½œä¸ºå¼•ç”¨å¯¹è±¡ï¼›

 3ã€æ­¤è½¯ä»¶å†…ç½®äº†ä¸€äº›åŠŸèƒ½å‡½æ•°ï¼Œéœ€ç”¨funè¿›è¡Œå¼•ç”¨ï¼Œç›®å‰æ”¯æŒå‡½æ•°åˆ—è¡¨å¦‚ä¸‹ï¼Œå¦‚éœ€æ–°çš„å‡½æ•°åŠŸèƒ½ï¼Œè¯·è”ç³»ä½œè€…ï¼š

    fun.lFormat(String code):å°†è¾“å‡ºå‚æ•°ä¸ºä¸‹åˆ’çº¿åˆ†éš”çš„å­—ç¬¦ä¸²ä¸­çš„ä¸‹åˆ’çº¿å»æ‰ï¼Œç¬¬ä¸€ä¸ªè¯çš„é¦–å­—æ¯å°å†™ï¼Œå…¶ä½™åˆ†éš”è¯çš„é¦–å­—æ¯å¤§å†™ï¼›

    fun.uFormat(String code):å°†è¾“å‡ºå‚æ•°ä¸ºä¸‹åˆ’çº¿åˆ†éš”çš„å­—ç¬¦ä¸²ä¸­çš„ä¸‹åˆ’çº¿å»æ‰ï¼Œç¬¬ä¸€ä¸ªè¯çš„é¦–å­—æ¯å¤§å†™ï¼Œå…¶ä½™åˆ†éš”è¯çš„é¦–å­—æ¯å¤§å†™ï¼›

    fun.lowerFirst(String str):å°†å­—ç¬¦ä¸²çš„é¦–å­—æ¯å°å†™ï¼Œå…¶ä½™å­—æ¯ä¿æŒä¸å˜

    fun.upperFirst(String str):å°†å­—ç¬¦ä¸²çš„é¦–å­—æ¯å¤§å†™ï¼Œå…¶ä½™å­—æ¯ä¿æŒä¸å˜

    fun.lower(String str):å°†å­—ç¬¦ä¸²æ”¹ä¸ºå°å†™

    fun.upper(String str):å°†å­—ç¬¦ä¸²æ”¹ä¸ºå¤§å†™

    fun.toLangDataType(String dbdt, String lang):æŸ¥æ‰¾typemapè¡¨ï¼Œæ ¹æ®æ•°æ®åº“çš„å­—æ®µç±»å‹å¾—åˆ°å¯¹åº”çš„è¯­è¨€çš„æ•°æ®ç±»å‹ã€‚

 4ã€ç”Ÿæˆæ–‡ä»¶åè§„åˆ™çš„è®¾ç½®ä¹Ÿä½¿ç”¨Velocityè¯­æ³•ï¼Œå¯ä»¥åœ¨æ–‡ä»¶åè§„åˆ™ä¸­ä½¿ç”¨å­ç›®å½•è§„åˆ™ï¼Œæ–‡ä»¶è·¯å¾„åˆ†éš”ç¬¦å¯ä»¥ç”¨"${sep}"ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ç”¨åæ–œæ "/"

  *#

//è¡¨å

${table.name} $table.name

//è¡¨CODE

${table.code} $table.code

//è¡¨CODEï¼Œå»ä¸‹åˆ’çº¿ï¼Œé¦–å­—æ¯å°å†™

${fun.lFormat($table.code)}

//è¡¨CODEï¼Œå»ä¸‹åˆ’çº¿ï¼Œé¦–å­—æ¯å¤§å†™

${fun.uFormat($table.code)}

 

 

//è¡¨åˆ—é›†åˆ

#foreach($col in $table.columns)

ç¬¬${count}åˆ—

    åˆ—åï¼š      ${col.name}

    åˆ—CODEï¼š${col.code}   æ ¼å¼åŒ–çš„åˆ—CODEï¼š${fun.uFormat($col.code)},${fun.lFormat($col.code)}

    åˆ—ç±»å‹ï¼š ${col.type}   ç›®æ ‡è¯­è¨€åˆ—ç±»å‹ï¼š${fun.toLangDataType($col.type,"JAVA")}

#end

 

#if ($table.primaryKey.size()>0) ##å…ˆåˆ¤æ–­æ˜¯å¦æœ‰ä¸»é”®

//è¡¨çš„ä¸»é”®ï¼ˆå³ä¸»é”®åªæœ‰ä¸€åˆ—ï¼‰

å•ä¸»é”®ï¼š${table.primaryColumn.name}ï¼Œ${table.primaryColumn.code}ï¼Œ${fun.lFormat($table.primaryColumn.code)}ï¼Œ${fun.uFormat($table.primaryColumn.code)}

//å¤åˆä¸»é”®ï¼ˆå³ä¸»é”®ç”±å¤šåˆ—ç»„æˆï¼‰

#foreach ($col in $table.primaryKey)

    åˆ—åï¼š      ${col.name}

    åˆ—CODEï¼š${col.code}   æ ¼å¼åŒ–çš„åˆ—CODEï¼š${fun.uFormat($col.code)},${fun.lFormat($col.code)}

    åˆ—ç±»å‹ï¼š ${col.type}   ç›®æ ‡è¯­è¨€åˆ—ç±»å‹ï¼š${fun.toLangDataType($col.type,"JAVA")}

#end

#end
 
//è¡¨çš„å¤–é”®

#if ($table.refs.size() > 0)

#foreach ($ref in $table.refs)

    å­è¡¨ï¼šCODE=${ref.childTable.code}ï¼Œåç§°=${ref.childTable.name}   //ref.childTableå¾—åˆ°å­è¡¨

    çˆ¶è¡¨ï¼šCODE=${ref.parentTable.code}ï¼Œåç§°=${ref.parentTable.name} //ref.parentTableå¾—åˆ°çˆ¶è¡¨

    å­è¡¨çš„åˆ—ï¼šCODE=${ref.childColumn.code}ï¼Œåç§°=${ref.childColumn.name}

    çˆ¶è¡¨çš„åˆ—ï¼šCODE=${ref.parentColumn.code}ï¼Œåç§°=${ref.parentColumn.name}

#end
#end
```
#### 2.3.3 TPL_TYPE_MODELæ¨¡æ¿ä½¿ç”¨è¯´æ˜
æ­¤æ¨¡æ¿é€šè¿‡å†…ç½®å˜é‡modelè·å–æ•°æ®æ¨¡å‹ä¸­çš„ç›¸å…³å±æ€§ã€‚
æ¨¡æ¿çš„æ³¨é‡Šä½¿ç”¨â€œ#*â€â€œ*#â€ï¼Œæ­¤ä¸¤è€…ä¹‹é—´åŒ…æ‹¬çš„å†…å®¹çš„ç”Ÿæˆä»£ç æ—¶ä¼šç•¥æ‰ã€‚
```bush
#*æ¨¡æ¿ä½¿ç”¨æ–¹æ³•

 1ã€æ­¤æ¨¡æ¿ä½¿ç”¨Velocityè¯­æ³•ï¼›

 2ã€æ¨¡æ¿ç±»å‹ä¸ºâ€œTPL_TYPE_TABLEâ€éœ€ä½¿ç”¨tableä½œä¸ºå¼•ç”¨å¯¹è±¡ï¼Œæ¨¡æ¿ç±»å‹ä¸ºâ€œTPL_TYPE_MODELâ€çš„éœ€ä½¿ç”¨modelä½œä¸ºå¼•ç”¨å¯¹è±¡ï¼›

 3ã€æ­¤è½¯ä»¶å†…ç½®äº†ä¸€äº›åŠŸèƒ½å‡½æ•°ï¼Œéœ€ç”¨funè¿›è¡Œå¼•ç”¨ï¼Œç›®å‰æ”¯æŒå‡½æ•°åˆ—æ¨¡å‹å¦‚ä¸‹ï¼Œå¦‚éœ€æ–°çš„å‡½æ•°åŠŸèƒ½ï¼Œè¯·è”ç³»ä½œè€…ï¼š

    fun.lFormat(String code):å°†è¾“å‡ºå‚æ•°ä¸ºä¸‹åˆ’çº¿åˆ†éš”çš„å­—ç¬¦ä¸²ä¸­çš„ä¸‹åˆ’çº¿å»æ‰ï¼Œç¬¬ä¸€ä¸ªè¯çš„é¦–å­—æ¯å°å†™ï¼Œå…¶ä½™åˆ†éš”è¯çš„é¦–å­—æ¯å¤§å†™ï¼›

    fun.uFormat(String code):å°†è¾“å‡ºå‚æ•°ä¸ºä¸‹åˆ’çº¿åˆ†éš”çš„å­—ç¬¦ä¸²ä¸­çš„ä¸‹åˆ’çº¿å»æ‰ï¼Œç¬¬ä¸€ä¸ªè¯çš„é¦–å­—æ¯å¤§å†™ï¼Œå…¶ä½™åˆ†éš”è¯çš„é¦–å­—æ¯å¤§å†™ï¼›

    fun.toLangDataType(String dbdt, String lang):æŸ¥æ‰¾typemapæ¨¡å‹ï¼Œæ ¹æ®æ•°æ®åº“çš„å­—æ®µç±»å‹å¾—åˆ°å¯¹åº”çš„è¯­è¨€çš„æ•°æ®ç±»å‹ã€‚

    fun.lowerFirst(String str):å°†å­—ç¬¦ä¸²çš„é¦–å­—æ¯å°å†™ï¼Œå…¶ä½™å­—æ¯ä¿æŒä¸å˜

    fun.upperFirst(String str):å°†å­—ç¬¦ä¸²çš„é¦–å­—æ¯å¤§å†™ï¼Œå…¶ä½™å­—æ¯ä¿æŒä¸å˜

    fun.lower(String str):å°†å­—ç¬¦ä¸²æ”¹ä¸ºå°å†™

    fun.upper(String str):å°†å­—ç¬¦ä¸²æ”¹ä¸ºå¤§å†™

 4ã€ç”Ÿæˆæ–‡ä»¶åè§„åˆ™çš„è®¾ç½®ä¹Ÿä½¿ç”¨Velocityè¯­æ³•ï¼Œå¯ä»¥åœ¨æ–‡ä»¶åè§„åˆ™ä¸­ä½¿ç”¨å­ç›®å½•è§„åˆ™ï¼Œæ–‡ä»¶è·¯å¾„åˆ†éš”ç¬¦å¯ä»¥ç”¨"${sep}"ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ç”¨åæ–œæ "/"

  *#

 

//æ¨¡å‹å

${model.name} $model.name

 

//éå†å…¨éƒ¨è¡¨

#foreach($table in $model.tables)

ç¬¬${count}ä¸ªè¡¨ï¼šè¡¨åï¼š${table.name}    è¡¨CODEï¼š${table.code} 

#end

 

//éå†å·²é€‰æ‹©çš„è¡¨

#foreach($table in $model.selectedTables)

ç¬¬${count}ä¸ªè¡¨ï¼šè¡¨åï¼š${table.name}    è¡¨CODEï¼š${table.code} 

#end

 

//æ¨¡å‹é‡Œæ‰€æœ‰å¤–é”®

#if ($model.refs.size() > 0)

#foreach ($ref in $model.refs)

    å­è¡¨ï¼šCODE=${ref.childTable.code}ï¼Œåç§°=${ref.childTable.name}   //ref.childTableå¾—åˆ°å­æ¨¡å‹

    çˆ¶è¡¨ï¼šCODE=${ref.parentTable.code}ï¼Œåç§°=${ref.parentTable.name} //ref.parentTableå¾—åˆ°çˆ¶æ¨¡å‹

    å­è¡¨çš„åˆ—ï¼šCODE=${ref.childColumn.code}ï¼Œåç§°=${ref.childColumn.name}

    çˆ¶è¡¨çš„åˆ—ï¼šCODE=${ref.parentColumn.code}ï¼Œåç§°=${ref.parentColumn.name}
#end
#end
 

```
#### 2.3.4 æ¨¡æ¿æ–‡ä»¶å‘½åè§„åˆ™
æ¯ä¸ªæ¨¡æ¿å¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ªæ¨¡æ¿ç”Ÿæˆæ–‡ä»¶çš„å‘½åè§„åˆ™
æ¨¡æ¿ç±»å‹ä¸ºTPL_TYPE_TABLE çš„å‘½åè§„åˆ™å¯ä»¥ä½¿ç”¨å†…ç½®å˜é‡tableè¿›è¡Œå®šä¹‰ï¼ŒåŒæ—¶æ”¯æŒå†…ç½®å‡½æ•°å’Œå­ç›®å½•ï¼Œä¾‹å¦‚è¡¨USER_BOOKå¯¹åº”å‘½åè§„åˆ™ä¸ºâ€œtxt/${fun.uFormat(${table.code})}_example.txtâ€ï¼Œåˆ™ç”Ÿæˆçš„æ–‡ä»¶ä¸ºç›®å½•txtä¸‹çš„â€œUserBook_example.txtâ€ã€‚
ç±»ä¼¼ï¼Œæ¨¡æ¿ç±»å‹ä¸ºTPL_TYPE_MODELçš„å‘½åè§„åˆ™ä½¿ç”¨å†…ç½®å˜é‡modelè¿›è¡Œå®šä¹‰ã€‚
#### 2.3.5 æ¨¡æ¿é›†
![ç”Ÿæˆçš„æ–‡ä»¶ç¤ºä¾‹](https://github.com/indexdoc/indexdoc-model-to-code/raw/main/README/templateSet.png)
#### 2.3.6 æ¨¡æ¿å†…å®¹
æ¨¡æ¿å†…å®¹å¯ä»¥ç›´æ¥åœ¨CodeAsstä¸­è¿›è¡Œç¼–è¾‘ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªå·±ç†Ÿæ‚‰çš„æ–‡æœ¬ç¼–è¾‘å™¨ç¼–è¾‘ã€‚
![ç”Ÿæˆçš„æ–‡ä»¶ç¤ºä¾‹](https://github.com/indexdoc/indexdoc-model-to-code/raw/main/README/modelSet.png)
### 2.4 â€œæ‰“å¼€æ•°æ®æ¨¡å‹â€ç•Œé¢
![ç”Ÿæˆçš„æ–‡ä»¶ç¤ºä¾‹](https://github.com/indexdoc/indexdoc-model-to-code/raw/main/README/openDataModel.png)
#### 2.4.1 æ‰“å¼€PDMæ–‡ä»¶
éœ€è¦å®‰è£…PowerDesigner15.3åŠä»¥ä¸Šç‰ˆæœ¬ï¼Œç”¨æˆ·åœ¨æ–‡ä»¶é€‰æ‹©å¯¹è¯æ¡†ä¸­é€‰æ‹©äº†PDMæ–‡ä»¶åï¼ŒCodeAsstä¼šæ‰“å¼€PowerDesignerè·å–PDMæ–‡ä»¶ä¸­çš„æ•°æ®æ¨¡å‹ä¿¡æ¯ã€‚
#### 2.4.2 ä½¿ç”¨å·²æ‰“å¼€çš„PDMæ–‡ä»¶
éœ€è¦å®‰è£…PowerDesigner15.3åŠä»¥ä¸Šç‰ˆæœ¬ï¼ŒCodeAsstä¼šè‡ªåŠ¨è¿æ¥PowerDesignerè·å–ç”¨æˆ·å·²ç»æ‰“å¼€çš„PDMæ–‡ä»¶ã€‚
#### 2.4.3 æ‰“å¼€XMLæ–‡ä»¶
CodeAsstè‡ªå®šä¹‰äº†è‡ªå·±çš„æ•°æ®æ¨¡å‹XMLæ–‡ä»¶ï¼Œç”¨æˆ·å¯ä»¥è‡ªè¡Œç¼–è¾‘XMLæ–‡ä»¶ä»¥å®šä¹‰è‡ªå·±çš„æ•°æ®æ¨¡å‹ã€‚åœ¨â€œé€‰æ‹©è¡¨æ¨¡å‹â€çš„ç•Œé¢ä¸­ï¼Œç”¨æˆ·å¯ä»¥å°†å·²æ‰“å¼€çš„æ•°æ®æ¨¡å‹å¯¼å‡ºä¸ºXMLæ–‡ä»¶è¿›è¡Œç¼–è¾‘ã€‚
#### 2.4.4 è¿æ¥ORACLEã€MySQLã€Sql Serverã€PostgreSQLæ•°æ®åº“
ç‚¹äº†ç›¸åº”æŒ‰é’®åï¼Œä¼šå¼¹å‡ºè¿æ¥æ•°æ®åº“çš„å¯¹è¯æ¡†ï¼Œåœ¨è¾“å…¥JDBCçš„è¿æ¥åœ°å€ã€ç”¨æˆ·åå’Œå¯†ç åï¼Œç‚¹â€œè¿æ¥â€æŒ‰é’®è·å–æ•°æ®åº“çš„ç”¨æˆ·åˆ—è¡¨ã€‚

![ç”Ÿæˆçš„æ–‡ä»¶ç¤ºä¾‹](https://github.com/indexdoc/indexdoc-model-to-code/raw/main/README/connectDatabase.png)

åœ¨é€‰ä¸­çš„ç”¨æˆ·åä¸­é€‰æ‹©ä¸€ä¸ªï¼Œç‚¹ç¡®å®šåï¼ŒCodeAsstä¼šè¯»å–æ­¤ç”¨æˆ·ä¸‹çš„æ‰€æœ‰è¡¨çš„å±æ€§ç»“æ„ä¿¡æ¯ï¼Œå¯èƒ½ä¼šèŠ±è´¹å‡ åˆ†é’Ÿæ—¶é—´å®Œæˆç›¸åº”æ“ä½œã€‚

![ç”Ÿæˆçš„æ–‡ä»¶ç¤ºä¾‹](https://github.com/indexdoc/indexdoc-model-to-code/raw/main/README/choseDatabase.png)
### 2.5 â€œé€‰æ‹©è¡¨æ¨¡å‹â€ç•Œé¢
åœ¨æ•°æ®æ¨¡å‹å·²æ‰“å¼€çš„æƒ…å†µä¸‹ï¼Œåœ¨â€œé€‰æ‹©è¡¨æ¨¡å‹â€ç•Œé¢å¯ä»¥æŸ¥çœ‹å¹¶é€‰æ‹©éœ€è¦ç”Ÿæˆä»£ç çš„è¡¨æ¨¡å‹ã€‚
åŒæ—¶ï¼Œå¯ä»¥å°†æ•°æ®æ¨¡å‹å¯¼å‡ºä¸ºXMLæ–‡ä»¶ï¼ˆåç¼€åä¸º.model.xmlï¼‰ã€‚

![ç”Ÿæˆçš„æ–‡ä»¶ç¤ºä¾‹](https://github.com/indexdoc/indexdoc-model-to-code/raw/main/README/choseTableModel.png)
### 2.6 ä»£ç ç”Ÿæˆ
åœ¨ä»£ç æ¨¡æ¿å·²ç»ç¡®è®¤ï¼Œæ•°æ®æ¨¡å‹å·²ç»ç¡®è®¤çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥æ‰“å¼€â€œä»£ç ç”Ÿæˆâ€ç•Œé¢ã€‚
![ç”Ÿæˆçš„æ–‡ä»¶ç¤ºä¾‹](https://github.com/indexdoc/indexdoc-model-to-code/raw/main/README/codeProduce.png)

å¦‚å›¾ï¼Œç‚¹å‡»çº¢åœˆå†…çš„æŒ‰é’®å¯ä»¥è®¾ç½®ç”Ÿæˆæ–‡ä»¶çš„ç›®å½•ï¼Œç‚¹å‡»â€œç”Ÿæˆæ–‡ä»¶â€æŒ‰é’®å¯ä»¥ç”Ÿæˆæ–‡ä»¶ã€‚

![ç”Ÿæˆçš„æ–‡ä»¶ç¤ºä¾‹](https://github.com/indexdoc/indexdoc-model-to-code/raw/main/README/createFlies.png)

éæˆæƒç”¨æˆ·ä»…èƒ½ç”Ÿæˆ3ä¸ªæ–‡ä»¶ã€‚

## 3 ğŸ“ é™„å½•
### 3.1 å†…ç½®å‡½æ•°åˆ—è¡¨
```bush
fun.lFormat(String code):å°†è¾“å‡ºå‚æ•°ä¸ºä¸‹åˆ’çº¿åˆ†éš”çš„å­—ç¬¦ä¸²ä¸­çš„ä¸‹åˆ’çº¿å»æ‰ï¼Œç¬¬ä¸€ä¸ªè¯çš„é¦–å­—æ¯å°å†™ï¼Œå…¶ä½™åˆ†éš”è¯çš„é¦–å­—æ¯å¤§å†™ï¼›

fun.uFormat(String code):å°†è¾“å‡ºå‚æ•°ä¸ºä¸‹åˆ’çº¿åˆ†éš”çš„å­—ç¬¦ä¸²ä¸­çš„ä¸‹åˆ’çº¿å»æ‰ï¼Œç¬¬ä¸€ä¸ªè¯çš„é¦–å­—æ¯å¤§å†™ï¼Œå…¶ä½™åˆ†éš”è¯çš„é¦–å­—æ¯å¤§å†™ï¼›

fun.lowerFirst(String str):å°†å­—ç¬¦ä¸²çš„é¦–å­—æ¯å°å†™ï¼Œå…¶ä½™å­—æ¯ä¿æŒä¸å˜

fun.upperFirst(String str):å°†å­—ç¬¦ä¸²çš„é¦–å­—æ¯å¤§å†™ï¼Œå…¶ä½™å­—æ¯ä¿æŒä¸å˜

fun.lower(String str):å°†å­—ç¬¦ä¸²æ”¹ä¸ºå°å†™

fun.upper(String str):å°†å­—ç¬¦ä¸²æ”¹ä¸ºå¤§å†™

fun.toLangDataType(String dbdt, String lang):æŸ¥æ‰¾æ•°æ®ç±»å‹æ˜ å°„è¡¨ï¼Œæ ¹æ®æ•°æ®åº“çš„å­—æ®µç±»å‹å¾—åˆ°å¯¹åº”çš„è¯­è¨€çš„æ•°æ®ç±»å‹ã€‚

æ ·ä¾‹ï¼š

//è¡¨CODEï¼Œå»ä¸‹åˆ’çº¿ï¼Œé¦–å­—æ¯å¤§å†™

${fun.uFormat($table.code)}
```
### 3.2 å†…ç½®å˜é‡åˆ—è¡¨
#### 3.2.1 TPL_TYPE_TABLEç±»å‹çš„æ¨¡æ¿
TPL_TYPE_TALBEç±»å‹çš„æ¨¡æ¿ä»¥tableä½œä¸ºä¸»å˜é‡è·å–é€‰ä¸­çš„è¡¨çš„å­—æ®µä¿¡æ¯ã€‚
```bush
l è¡¨åï¼štable.name

l è¡¨CODEï¼štable.code

l è¡¨åˆ—é›†åˆï¼štable.columns

#foreach($col in $table.columns)

ç¬¬${count}åˆ—

    åˆ—åï¼š      ${col.name}

    åˆ—CODEï¼š${col.code}   æ ¼å¼åŒ–çš„åˆ—CODEï¼š${fun.uFormat($col.code)},${fun.lFormat($col.code)}

    åˆ—ç±»å‹ï¼š ${col.type}   ç›®æ ‡è¯­è¨€åˆ—ç±»å‹ï¼š${fun.toLangDataType($col.type,"JAVA")}

#end

l ä¸»é”®ï¼štable.primaryKey

#if ($table.primaryKey.size()>0) ##å…ˆåˆ¤æ–­æ˜¯å¦æœ‰ä¸»é”®

//è¡¨çš„ä¸»é”®ï¼ˆå³ä¸»é”®åªæœ‰ä¸€åˆ—ï¼‰

å•ä¸»é”®ï¼š${table.primaryColumn.name}ï¼Œ${table.primaryColumn.code}ï¼Œ${fun.lFormat($table.primaryColumn.code)}ï¼Œ${fun.uFormat($table.primaryColumn.code)}

//å¤åˆä¸»é”®ï¼ˆå³ä¸»é”®ç”±å¤šåˆ—ç»„æˆï¼‰

#foreach ($col in $table.primaryKey)

    åˆ—åï¼š      ${col.name}

    åˆ—CODEï¼š${col.code}   æ ¼å¼åŒ–çš„åˆ—CODEï¼š${fun.uFormat($col.code)},${fun.lFormat($col.code)}

    åˆ—ç±»å‹ï¼š ${col.type}   ç›®æ ‡è¯­è¨€åˆ—ç±»å‹ï¼š${fun.toLangDataType($col.type,"JAVA")}

#end

#end

l å¤–é”®:table.refs

#if ($table.refs.size() > 0)

#foreach ($ref in $table.refs)

    å­è¡¨ï¼šCODE=${ref.childTable.code}ï¼Œåç§°=${ref.childTable.name}   //ref.childTableå¾—åˆ°å­è¡¨

    çˆ¶è¡¨ï¼šCODE=${ref.parentTable.code}ï¼Œåç§°=${ref.parentTable.name} //ref.parentTableå¾—åˆ°çˆ¶è¡¨

    å­è¡¨çš„åˆ—ï¼šCODE=${ref.childColumn.code}ï¼Œåç§°=${ref.childColumn.name}

    çˆ¶è¡¨çš„åˆ—ï¼šCODE=${ref.parentColumn.code}ï¼Œåç§°=${ref.parentColumn.name}

#end

#end
```
#### 3.2.2 TPL_TYPE_MODELç±»å‹æ¨¡æ¿
```bush
l æ¨¡å‹åï¼šmodel.name

l æ¨¡å‹ä¸­çš„è¡¨é›†åˆï¼šmodel.tables

#foreach($table in $model.tables)

ç¬¬${count}ä¸ªè¡¨ï¼šè¡¨åï¼š${table.name}    è¡¨CODEï¼š${table.code} 

#end

l æ¨¡å‹ä¸­å·²é€‰æ‹©çš„è¡¨é›†åˆï¼šmodel.selectedTables

#foreach($table in $model.selectedTables)

ç¬¬${count}ä¸ªè¡¨ï¼šè¡¨åï¼š${table.name}    è¡¨CODEï¼š${table.code} 

#end

l æ¨¡å‹ä¸­çš„å¤–é”®é›†åˆï¼šmodel.refs

#if ($model.refs.size() > 0)

#foreach ($ref in $model.refs)

    å­è¡¨ï¼šCODE=${ref.childTable.code}ï¼Œåç§°=${ref.childTable.name}   //ref.childTableå¾—åˆ°å­æ¨¡å‹

    çˆ¶è¡¨ï¼šCODE=${ref.parentTable.code}ï¼Œåç§°=${ref.parentTable.name} //ref.parentTableå¾—åˆ°çˆ¶æ¨¡å‹

    å­è¡¨çš„åˆ—ï¼šCODE=${ref.childColumn.code}ï¼Œåç§°=${ref.childColumn.name}

    çˆ¶è¡¨çš„åˆ—ï¼šCODE=${ref.parentColumn.code}ï¼Œåç§°=${ref.parentColumn.name}

#end

#end

```
### 3.3 æ¨¡æ¿æ ·ä¾‹
#### 3.3.1 æ¨¡æ¿é›†åˆ
![ç”Ÿæˆçš„æ–‡ä»¶ç¤ºä¾‹](https://github.com/indexdoc/indexdoc-model-to-code/raw/main/README/modelSet.png)
#### 3.3.2 æ¨¡æ¿å†…å®¹
æ¨¡æ¿å†…å®¹å¯ä»¥ç›´æ¥åœ¨CodeAsstä¸­è¿›è¡Œç¼–è¾‘ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªå·±ç†Ÿæ‚‰çš„æ–‡æœ¬ç¼–è¾‘å™¨ç¼–è¾‘ã€‚
![ç”Ÿæˆçš„æ–‡ä»¶ç¤ºä¾‹](https://github.com/indexdoc/indexdoc-model-to-code/raw/main/README/templateContent.png)
### 3.4 æ•°æ®ç±»å‹æ˜ å°„æ–‡ä»¶æ ·ä¾‹
CodeAsstè‡ªå¸¦äº†ä¸€ä¸ªæ•°æ®ç±»å‹æ˜ å°„æ–‡ä»¶default.typemapï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®è‡ªå·±éœ€è¦è¿›è¡Œæ–°å¢å’Œä¿®æ”¹ã€‚
![ç”Ÿæˆçš„æ–‡ä»¶ç¤ºä¾‹](https://github.com/indexdoc/indexdoc-model-to-code/raw/main/README/dataTypeMapping.png)
### 3.5 æ•°æ®æ¨¡å‹XMLæ–‡ä»¶è¯´æ˜
CodeAsstè‡ªå®šä¹‰äº†æ•°æ®æ¨¡å‹çš„XMLè¯­æ³•ï¼Œç”¨æˆ·å¯ä»¥ç”¨PowerDesignerç¼–è¾‘æ•°æ®æ¨¡å‹åå¯¼å‡ºä¸ºXMLæ–‡ä»¶ï¼Œç„¶åç”¨æ–‡æœ¬ç¼–è¾‘å™¨çœ‹çœ‹æ–‡ä»¶æ ¼å¼ã€‚
## 4 ğŸ”§å¸¸è§é—®é¢˜
- æ”¯æŒPowerDesignerçš„å“ªå‡ ä¸ªç‰ˆæœ¬ï¼šç›®å‰æµ‹è¯•è¿‡PowerDesigner15.3å’Œ16.1ã€‚ä½äº15.3çš„PowerDesignerç‰ˆæœ¬æœ¬è½¯ä»¶æ— æ³•æ”¯æŒã€‚å¦‚æœæœ‰å‘ç°é«˜äº15.3çš„è½¯ä»¶ç‰ˆæœ¬æ”¯æŒä¸äº†çš„ï¼Œè¯·å’Œä½œè€…è”ç³»å¤„ç†ã€‚

- æ”¯æŒå“ªäº›æ•°æ®åº“ç³»ç»Ÿï¼šç†è®ºä¸Šæ‰€æœ‰å…³ç³»å‹æ•°æ®åº“ç³»ç»Ÿéƒ½å¯ä»¥æ”¯æ’‘ï¼Œç›®å‰æµ‹è¯•è¿‡Oracleã€MySQLã€Sql Serverã€PostgreSQLå››ç§æ•°æ®åº“ç³»ç»Ÿã€‚å¦‚æœæœ‰éœ€è¦æ”¯æŒå…¶å®ƒæ•°æ®åº“ç³»ç»Ÿï¼Œè¯·å’Œä½œè€…è”ç³»ã€‚

- å¯ä»¥å®šåˆ¶åŒ–å¼€å‘ä¹ˆï¼šå½“ç„¶å¯ä»¥ï¼Œè¯·å’Œä½œè€…è”ç³»ï¼Œæ ¹æ®å®šåˆ¶åŒ–å¼€å‘çš„å·¥ä½œé‡è¿›è¡Œæ”¶è´¹ã€‚


## 5 ğŸ“ è”ç³»æ–¹å¼

- ä½œè€…ï¼šæ­å·æ™ºäºˆæ•°ä¿¡æ¯æŠ€æœ¯æœ‰é™å…¬å¸

- é‚®ç®±ï¼šindexdoc@qq.com

- å®˜æ–¹ç½‘ç«™ï¼šhttps://www.indexdoc.com/

