<div align="center">
  <div style="font-size: 15px; line-height: 2; padding: 4px 0; letter-spacing: 0.5px;">
    <strong style="color: #24292f;">English</strong>
    | <a href="README.md" style="color: #0969da; text-decoration: none;">ç®€ä½“ä¸­æ–‡</a>
    <!-- | <a href="https://ä½ çš„Demoåœ¨çº¿åœ°å€" target="_blank" style="color: #165DFF; font-weight: 600; text-decoration: none;">âœ¨ onlineDemo</a> -->
  </div>
</div>
  <div style="font-size: 14px; color: #57606a; padding: 2px 0;text-align: left;">
    <span style="background: #f6f8fa; padding: 2px 8px; border-radius: 4px; font-size: 13px;">Other Core Repositories</span>
    <a href="https://github.com/indexdoc/indexdoc-batch-generator" target="_blank" style="color: #0969da; text-decoration: none; margin: 0 6px;">indexdoc-batch-generatorï¼ˆBatch Document Assistantï¼‰</a><br/>
    <a href="https://github.com/indexdoc/indexdoc-ai-offline" target="_blank" style="color: #0969da; text-decoration: none; margin: 0 6px;">indexdoc-ai-offlineï¼ˆLocal Document AI Assistantï¼‰</a><br/>
    <a href="https://github.com/indexdoc/indexdoc-converter" target="_blank" style="color: #0969da; text-decoration: none; margin: 0 6px;">indexdoc-converterï¼ˆFile Converterï¼‰</a><br/>
    <a href="https://github.com/indexdoc/indexdoc-editor" target="_blank" style="color: #0969da; text-decoration: none; margin: 0 6px;">indexdoc-editorï¼ˆMarkdown Editorï¼‰</a><br/>
    <a href="https://github.com/indexdoc/indexdoc-vector" target="_blank" style="color: #0969da; text-decoration: none; margin: 0 6px;">indexdoc-vectorï¼ˆVector Databaseï¼‰</a><br/>
  </div>

---
# CodeAsst - Code Generation Assistant
CodeAsst is a powerful code generation tool built on the core principle of **Data Model + Template = Code**. It helps development teams and individual developers achieve batch, standardized code generation, significantly improving development efficiency.

It currently supports PDM files generated by PowerDesigner, enabling table model extraction from multiple databases including Oracle, MySQL, MS SQL Server, and PostgreSQL. It also supports manually edited data models via XML files.

The template syntax follows a Velocity-like (similar to Freemarker) style and supports custom **template sets**. A template set can contain multiple template files, allowing one-click generation of all code and configuration files for a software project through a single template set.
This tool is suitable for various software companies, studios, development teams, and individual developers.

Data models form the foundation of software systems, with most system operations revolving around CRUD (Create, Read, Update, Delete) operations on basic data. If you prefer the workflow of **designing data models first, then writing code**, CodeAsst will be your efficient development assistant. With proficient use, you can batch generate nearly all code for a system; even better, you can batch generate Demo versions of multiple systems based on existing system code templates â€“ this is not an overstatement, but a proven capability of CodeAsst.

[![Python Version](https://img.shields.io/badge/python-3.10+-green.svg)](https://www.python.org/) [![GitHub Stars](https://img.shields.io/github/stars/indexdoc/indexdoc-model-to-code?style=social)](https://github.com/indexdoc/indexdoc-model-to-code) [![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)


## 1 âœ¨ Code Generation Process
![Code Generation Process](https://github.com/indexdoc/indexdoc-model-to-code/raw/main/README/codeGenerationProcess.png)
- **Data Model**: Files generated by data modeling tools. CodeAsst supports PDM files generated by PowerDesigner (requires PowerDesigner 15.3 or above) and table models from four databases: Oracle, MySQL, MS SQL Server, and PostgreSQL.
- **Code Template**: Custom template files created by users, typically based on existing code with variable placeholders (using CodeAsst's custom variables) for content that needs to be replaced with data model values.
- **Data Type Mapping**: Mapping relationships between data model types and programming language types (e.g., Oracle's Varchar2 maps to Java's String).
- **Code Generation**: Combines data models with code templates (via data type mapping) to generate code.

## 2 ðŸš€ Code Generation Operations
### 2.1 System Main Page
![Main Page](https://github.com/indexdoc/indexdoc-model-to-code/raw/main/README/mainPage.png)
### 2.2 "Data Type Mapping" Interface
![Data Type Mapping](https://github.com/indexdoc/indexdoc-model-to-code/raw/main/README/dataTypeMapping.png)

Data type mapping relationships can be saved in files. CodeAsst includes a default mapping file (`default.typemap`), and users can edit their own custom mapping files.
### 2.3 "Edit Template" Interface
![Edit Template](https://github.com/indexdoc/indexdoc-model-to-code/raw/main/README/editTemplate.png)

CodeAsst supports template sets â€“ a template set can include multiple templates (e.g., you can define a template set for Java programs and another for .NET programs).
#### 2.3.1 Create New Template
Click the "New Template" button to create a new template file. You can import content from existing template files in this interface.

There are two template types:
- **TPL_TYPE_TABLE**: For single tables (ideal for CRUD operation code templates)
- **TPL_TYPE_MODEL**: For the entire data model (suitable for files involving multiple tables)

![New Template](https://github.com/indexdoc/indexdoc-model-to-code/raw/main/README/newTemplate.png)
#### 2.3.2 TPL_TYPE_TABLE Template Usage
This template uses the built-in variable `table` to access properties of a single table in the data model.

Template comments use `#*` and `*#` â€“ content between these delimiters will be omitted during code generation.
```bash
#*Template Usage Instructions

 1. This template uses Velocity syntax;

 2. TPL_TYPE_TABLE templates must use `table` as the reference object, while TPL_TYPE_MODEL templates must use `model`;

 3. The software includes built-in utility functions referenced via `fun`. Current supported functions are listed below. Contact the author for new function requests:

    fun.lFormat(String code): Removes underscores from input string, makes first word lowercase, and capitalizes the first letter of subsequent words (camelCase);

    fun.uFormat(String code): Removes underscores from input string and capitalizes the first letter of all words (PascalCase);

    fun.lowerFirst(String str): Makes the first character lowercase, keeping others unchanged;

    fun.upperFirst(String str): Makes the first character uppercase, keeping others unchanged;

    fun.lower(String str): Converts entire string to lowercase;

    fun.upper(String str): Converts entire string to uppercase;

    fun.toLangDataType(String dbdt, String lang): Looks up typemap table to get corresponding language data type from database field type.

 4. File naming rules also use Velocity syntax and support subdirectories. Use "${sep}" or "/" as file path separators.

  *#

//Table Name
${table.name} $table.name

//Table CODE
${table.code} $table.code

//Table CODE (no underscores, first letter lowercase)
${fun.lFormat($table.code)}

//Table CODE (no underscores, first letter uppercase)
${fun.uFormat($table.code)}

 

 

//Table Column Collection
#foreach($col in $table.columns)
${count}th Column
    Column Name:      ${col.name}
    Column CODE: ${col.code}   Formatted Column CODE: ${fun.uFormat($col.code)},${fun.lFormat($col.code)}
    Column Type: ${col.type}   Target Language Type: ${fun.toLangDataType($col.type,"JAVA")}
#end

 

#if ($table.primaryKey.size()>0) ##Check if primary key exists
//Table Primary Key (single column primary key)
Single Primary Key: ${table.primaryColumn.name}, ${table.primaryColumn.code}, ${fun.lFormat($table.primaryColumn.code)}, ${fun.uFormat($table.primaryColumn.code)}

//Composite Primary Key (multiple columns)
#foreach ($col in $table.primaryKey)
    Column Name:      ${col.name}
    Column CODE: ${col.code}   Formatted Column CODE: ${fun.uFormat($col.code)},${fun.lFormat($col.code)}
    Column Type: ${col.type}   Target Language Type: ${fun.toLangDataType($col.type,"JAVA")}
#end
#end
 
//Table Foreign Keys
#if ($table.refs.size() > 0)
#foreach ($ref in $table.refs)
    Child Table: CODE=${ref.childTable.code}, Name=${ref.childTable.name}   //ref.childTable gets child table
    Parent Table: CODE=${ref.parentTable.code}, Name=${ref.parentTable.name} //ref.parentTable gets parent table
    Child Table Column: CODE=${ref.childColumn.code}, Name=${ref.childColumn.name}
    Parent Table Column: CODE=${ref.parentColumn.code}, Name=${ref.parentColumn.name}
#end
#end
```
#### 2.3.3 TPL_TYPE_MODEL Template Usage
This template uses the built-in variable `model` to access properties of the entire data model.

Template comments use `#*` and `*#` â€“ content between these delimiters will be omitted during code generation.
```bash
#*Template Usage Instructions

 1. This template uses Velocity syntax;

 2. TPL_TYPE_TABLE templates must use `table` as the reference object, while TPL_TYPE_MODEL templates must use `model`;

 3. The software includes built-in utility functions referenced via `fun`. Current supported functions are listed below. Contact the author for new function requests:

    fun.lFormat(String code): Removes underscores from input string, makes first word lowercase, and capitalizes the first letter of subsequent words (camelCase);

    fun.uFormat(String code): Removes underscores from input string and capitalizes the first letter of all words (PascalCase);

    fun.toLangDataType(String dbdt, String lang): Looks up typemap table to get corresponding language data type from database field type;

    fun.lowerFirst(String str): Makes the first character lowercase, keeping others unchanged;

    fun.upperFirst(String str): Makes the first character uppercase, keeping others unchanged;

    fun.lower(String str): Converts entire string to lowercase;

    fun.upper(String str): Converts entire string to uppercase.

 4. File naming rules also use Velocity syntax and support subdirectories. Use "${sep}" or "/" as file path separators.

  *#

 

//Model Name
${model.name} $model.name

 

//Iterate All Tables
#foreach($table in $model.tables)
${count}th Table: Name: ${table.name}    CODE: ${table.code} 
#end

 

//Iterate Selected Tables
#foreach($table in $model.selectedTables)
${count}th Table: Name: ${table.name}    CODE: ${table.code} 
#end

 

//All Foreign Keys in Model
#if ($model.refs.size() > 0)
#foreach ($ref in $model.refs)
    Child Table: CODE=${ref.childTable.code}, Name=${ref.childTable.name}   //ref.childTable gets child model
    Parent Table: CODE=${ref.parentTable.code}, Name=${ref.parentTable.name} //ref.parentTable gets parent model
    Child Table Column: CODE=${ref.childColumn.code}, Name=${ref.childColumn.name}
    Parent Table Column: CODE=${ref.parentColumn.code}, Name=${ref.parentColumn.name}
#end
#end
```
#### 2.3.4 Template File Naming Rules
Each template can define custom naming rules for generated files:
- **TPL_TYPE_TABLE**: Use the built-in `table` variable (supports functions and subdirectories). Example: For table `USER_BOOK` with rule `txt/${fun.uFormat(${table.code})}_example.txt`, the generated file will be `txt/UserBook_example.txt`.
- **TPL_TYPE_MODEL**: Use the built-in `model` variable.

#### 2.3.5 Template Sets
![Template Set](https://github.com/indexdoc/indexdoc-model-to-code/raw/main/README/templateSet.png)
#### 2.3.6 Template Content
Edit template content directly in CodeAsst or use your preferred text editor.
![Model Set](https://github.com/indexdoc/indexdoc-model-to-code/raw/main/README/modelSet.png)
### 2.4 "Open Data Model" Interface
![Open Data Model](https://github.com/indexdoc/indexdoc-model-to-code/raw/main/README/openDataModel.png)
#### 2.4.1 Open PDM File
Requires PowerDesigner 15.3 or above. After selecting a PDM file in the file dialog, CodeAsst opens PowerDesigner to extract data model information.

#### 2.4.2 Use Opened PDM File
Requires PowerDesigner 15.3 or above. CodeAsst automatically connects to PowerDesigner to access currently opened PDM files.

#### 2.4.3 Open XML File
CodeAsst defines a custom XML format for data models. Users can manually edit XML files to define their own data models. In the "Select Table Model" interface, users can export opened data models as XML files for editing.

#### 2.4.4 Connect to ORACLE, MySQL, SQL Server, PostgreSQL Databases
Click the corresponding button to open the database connection dialog. Enter JDBC connection URL, username, and password, then click "Connect" to retrieve the database user list.

![Connect Database](https://github.com/indexdoc/indexdoc-model-to-code/raw/main/README/connectDatabase.png)

Select a username and confirm â€“ CodeAsst will read all table structure information under this user (may take several minutes).

![Choose Database](https://github.com/indexdoc/indexdoc-model-to-code/raw/main/README/choseDatabase.png)
### 2.5 "Select Table Model" Interface
With a data model open, view and select tables for code generation in this interface. You can also export the data model as an XML file (with `.model.xml` extension).

![Choose Table Model](https://github.com/indexdoc/indexdoc-model-to-code/raw/main/README/choseTableModel.png)
### 2.6 Code Generation
With templates and data model confirmed, open the "Code Generation" interface.
![Code Produce](https://github.com/indexdoc/indexdoc-model-to-code/raw/main/README/codeProduce.png)

As shown, click the button in the red circle to set the output directory, then click "Generate Files" to create code files.

![Create Files](https://github.com/indexdoc/indexdoc-model-to-code/raw/main/README/createFlies.png)

**Note**: Unauthorized users can generate a maximum of 3 files only.

## 3 ðŸ“ Appendix
### 3.1 Built-in Function List
```bash
fun.lFormat(String code): Removes underscores from input string, makes first word lowercase, and capitalizes the first letter of subsequent words (camelCase);

fun.uFormat(String code): Removes underscores from input string and capitalizes the first letter of all words (PascalCase);

fun.lowerFirst(String str): Makes the first character lowercase, keeping others unchanged;

fun.upperFirst(String str): Makes the first character uppercase, keeping others unchanged;

fun.lower(String str): Converts entire string to lowercase;

fun.upper(String str): Converts entire string to uppercase;

fun.toLangDataType(String dbdt, String lang): Looks up data type mapping table to get corresponding language data type from database field type.

Example:

//Table CODE (no underscores, first letter uppercase)
${fun.uFormat($table.code)}
```
### 3.2 Built-in Variable List
#### 3.2.1 TPL_TYPE_TABLE Templates
TPL_TYPE_TABLE templates use `table` as the main variable to access table information:
```bash
- Table Name: table.name

- Table CODE: table.code

- Table Column Collection: table.columns

#foreach($col in $table.columns)
${count}th Column
    Column Name:      ${col.name}
    Column CODE: ${col.code}   Formatted Column CODE: ${fun.uFormat($col.code)},${fun.lFormat($col.code)}
    Column Type: ${col.type}   Target Language Type: ${fun.toLangDataType($col.type,"JAVA")}
#end

- Primary Key: table.primaryKey

#if ($table.primaryKey.size()>0) ##Check if primary key exists
//Table Primary Key (single column)
Single Primary Key: ${table.primaryColumn.name}, ${table.primaryColumn.code}, ${fun.lFormat($table.primaryColumn.code)}, ${fun.uFormat($table.primaryColumn.code)}

//Composite Primary Key (multiple columns)
#foreach ($col in $table.primaryKey)
    Column Name:      ${col.name}
    Column CODE: ${col.code}   Formatted Column CODE: ${fun.uFormat($col.code)},${fun.lFormat($col.code)}
    Column Type: ${col.type}   Target Language Type: ${fun.toLangDataType($col.type,"JAVA")}
#end
#end

- Foreign Keys: table.refs

#if ($table.refs.size() > 0)
#foreach ($ref in $table.refs)
    Child Table: CODE=${ref.childTable.code}, Name=${ref.childTable.name}   //ref.childTable gets child table
    Parent Table: CODE=${ref.parentTable.code}, Name=${ref.parentTable.name} //ref.parentTable gets parent table
    Child Table Column: CODE=${ref.childColumn.code}, Name=${ref.childColumn.name}
    Parent Table Column: CODE=${ref.parentColumn.code}, Name=${ref.parentColumn.name}
#end
#end
```
#### 3.2.2 TPL_TYPE_MODEL Templates
```bash
- Model Name: model.name

- All Tables in Model: model.tables

#foreach($table in $model.tables)
${count}th Table: Name: ${table.name}    CODE: ${table.code} 
#end

- Selected Tables in Model: model.selectedTables

#foreach($table in $model.selectedTables)
${count}th Table: Name: ${table.name}    CODE: ${table.code} 
#end

- All Foreign Keys in Model: model.refs

#if ($model.refs.size() > 0)
#foreach ($ref in $model.refs)
    Child Table: CODE=${ref.childTable.code}, Name=${ref.childTable.name}   //ref.childTable gets child model
    Parent Table: CODE=${ref.parentTable.code}, Name=${ref.parentTable.name} //ref.parentTable gets parent model
    Child Table Column: CODE=${ref.childColumn.code}, Name=${ref.childColumn.name}
    Parent Table Column: CODE=${ref.parentColumn.code}, Name=${ref.parentColumn.name}
#end
#end
```
### 3.3 Template Examples
#### 3.3.1 Template Sets
![Model Set](https://github.com/indexdoc/indexdoc-model-to-code/raw/main/README/modelSet.png)
#### 3.3.2 Template Content
Edit template content directly in CodeAsst or use your preferred text editor.
![Template Content](https://github.com/indexdoc/indexdoc-model-to-code/raw/main/README/templateContent.png)
### 3.4 Data Type Mapping File Example
CodeAsst includes a default data type mapping file (`default.typemap`). Users can add or modify mappings as needed.
![Data Type Mapping](https://github.com/indexdoc/indexdoc-model-to-code/raw/main/README/dataTypeMapping.png)
### 3.5 Data Model XML File Specification
CodeAsst defines a custom XML syntax for data models. Users can edit data models in PowerDesigner, export as XML files, and examine the format with a text editor.

## 4 ðŸ”§ Frequently Asked Questions
- **Supported PowerDesigner versions**: Tested with PowerDesigner 15.3 and 16.1. Versions below 15.3 are not supported. Contact the author if newer versions (above 15.3) encounter compatibility issues.

- **Supported databases**: Theoretically supports all relational databases. Currently tested with Oracle, MySQL, SQL Server, and PostgreSQL. Contact the author to request support for additional databases.

- **Custom development available?**: Yes. Contact the author for custom development services (priced based on workload).

## 5 ðŸ“ž Contact Information
- **Author**: Hangzhou Zhiyu Shu Information Technology Co., Ltd.
- **Email**: indexdoc@qq.com
- **Official Website**: https://www.indexdoc.com/
